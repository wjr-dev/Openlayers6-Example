(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ee15adac"],{"0710":function(t,e,n){"use strict";var i=n("e269"),o=n("592d"),r={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},a=n("cd7e"),s=n("0af5"),p=n("1e8d"),c=n("0999"),l=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!==typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),d={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},u=function(t){function e(e){var n=t.call(this)||this;n.on,n.once,n.un,n.options=e,n.id=e.id,n.insertFirst=void 0===e.insertFirst||e.insertFirst,n.stopEvent=void 0===e.stopEvent||e.stopEvent,n.element=document.createElement("div"),n.element.className=void 0!==e.className?e.className:"ol-overlay-container "+a["d"],n.element.style.position="absolute",n.element.style.pointerEvents="auto";var i=e.autoPan;return i&&"object"!==typeof i&&(i={animation:e.autoPanAnimation,margin:e.autoPanMargin}),n.autoPan=i||!1,n.rendered={transform_:"",visible:!0},n.mapPostrenderListenerKey=null,n.addChangeListener(d.ELEMENT,n.handleElementChanged),n.addChangeListener(d.MAP,n.handleMapChanged),n.addChangeListener(d.OFFSET,n.handleOffsetChanged),n.addChangeListener(d.POSITION,n.handlePositionChanged),n.addChangeListener(d.POSITIONING,n.handlePositioningChanged),void 0!==e.element&&n.setElement(e.element),n.setOffset(void 0!==e.offset?e.offset:[0,0]),n.setPositioning(void 0!==e.positioning?e.positioning:r.TOP_LEFT),void 0!==e.position&&n.setPosition(e.position),n}return l(e,t),e.prototype.getElement=function(){return this.get(d.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(d.MAP)},e.prototype.getOffset=function(){return this.get(d.OFFSET)},e.prototype.getPosition=function(){return this.get(d.POSITION)},e.prototype.getPositioning=function(){return this.get(d.POSITIONING)},e.prototype.handleElementChanged=function(){Object(c["d"])(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(c["e"])(this.element),Object(p["c"])(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(p["a"])(t,o["a"].POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(d.ELEMENT,t)},e.prototype.setMap=function(t){this.set(d.MAP,t)},e.prototype.setOffset=function(t){this.set(d.OFFSET,t)},e.prototype.setPosition=function(t){this.set(d.POSITION,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(d.POSITION)){var n=this.getRect(e.getTargetElement(),e.getSize()),i=this.getElement(),o=this.getRect(i,[Object(c["c"])(i),Object(c["b"])(i)]),r=t||{},a=void 0===r.margin?20:r.margin;if(!Object(s["g"])(n,o)){var p=o[0]-n[0],l=n[2]-o[2],u=o[1]-n[1],h=n[3]-o[3],f=[0,0];if(p<0?f[0]=p-a:l<0&&(f[0]=Math.abs(l)+a),u<0?f[1]=u-a:h<0&&(f[1]=Math.abs(h)+a),0!==f[0]||0!==f[1]){var m=e.getView().getCenterInternal(),g=e.getPixelFromCoordinateInternal(m);if(!g)return;var y=[g[0]+f[0],g[1]+f[1]],O=r.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(y),duration:O.duration,easing:O.easing})}}}},e.prototype.getRect=function(t,e){var n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,o=n.top+window.pageYOffset;return[i,o,i+e[0],o+e[1]]},e.prototype.setPositioning=function(t){this.set(d.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var n=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(n,i)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var n=this.element.style,i=this.getOffset(),o=this.getPositioning();this.setVisible(!0);var a=Math.round(t[0]+i[0])+"px",s=Math.round(t[1]+i[1])+"px",p="0%",c="0%";o==r.BOTTOM_RIGHT||o==r.CENTER_RIGHT||o==r.TOP_RIGHT?p="-100%":o!=r.BOTTOM_CENTER&&o!=r.CENTER_CENTER&&o!=r.TOP_CENTER||(p="-50%"),o==r.BOTTOM_LEFT||o==r.BOTTOM_CENTER||o==r.BOTTOM_RIGHT?c="-100%":o!=r.CENTER_LEFT&&o!=r.CENTER_CENTER&&o!=r.CENTER_RIGHT||(c="-50%");var l="translate("+p+", "+c+") translate("+a+", "+s+")";this.rendered.transform_!=l&&(this.rendered.transform_=l,n.transform=l,n.msTransform=l)},e.prototype.getOptions=function(){return this.options},e}(i["a"]);e["a"]=u},"0b79":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"map-box"},[n("div",{ref:"map",staticClass:"map-container",attrs:{id:"map"}}),n("div",{class:{resource:!0,alarming:t.alarming},attrs:{id:"resource"}},[n("div",{staticClass:"res-bg"}),n("span",{staticClass:"iconfont icon-qiuji"})]),n("div",{staticClass:"button-box"},[n("a-button",{attrs:{type:"primary"},on:{click:t.handleAlarm}},[t._v(" 报警 ")]),n("a-button",{on:{click:t.handleCancel}},[t._v("取消")])],1)])},o=[],r=(n("d81d"),n("69af")),a=(n("5bc0"),n("5eee")),s=n("d0e9"),p=n("480c"),c=n("a2c7"),l=n("4cdf"),d=n("f403"),u=n("6c77"),h=n("ce2c"),f=n("83a6"),m=n("3e6b"),g=n("5831"),y=n("834d"),O=n("ca42"),T=n("0710"),E=n("3e63"),P={name:"ResPointAlarm",mixins:[r["a"]],components:{IconFont:E["a"]},data:function(){return{map:null,pointLayer:null,point:[13384755.517469,3529894.878215],resPoint:null,speed:600,start:Date.now(),alarming:!1}},mounted:function(){this.initMap()},beforeDestroy:function(){this.pointLayer.un("postrender",this.animation)},methods:{initMap:function(){this.map=new a["a"]({target:"map",layers:[new p["a"]({source:new s["a"]})],view:new c["a"]({center:[13384755.517469,3529894.878215],zoom:15}),controls:[]}),this.getResourceOverlay()},getResourceOverlay:function(){var t=new T["a"]({element:document.getElementById("resource"),position:this.point,positioning:"center-center",stopEvent:!0});this.map.addOverlay(t)},initFeature:function(){var t=new l["a"]({id:2,geometry:new d["a"](this.point),style:new u["c"]({image:new h["a"]({radius:18,fill:new f["a"]({color:"transparent"})})})}),e=new m["a"]({style:function(t){return t.get("style")},source:new g["a"]({features:[t]})});return e},animation:function(t){var e=Object(y["a"])(t),n=t.frameState,i=n.time-this.start,o=18,r=.6;i>this.speed?(o=18,r=.6,this.start=Date.now()):(o=30*Object(O["d"])(i/this.speed),r*=Object(O["d"])(1-i/this.speed));var a=new d["a"](this.point),s=new d["a"](this.point),p=new d["a"](this.point);e.setStyle(this.getPointStyle(o,2.5*r)),e.drawGeometry(a),e.setStyle(this.getPointStyle(1.5*o,1.5*r)),e.drawGeometry(s),e.setStyle(this.getPointStyle(2.5*o,r)),e.drawGeometry(p),this.map.render()},getPointStyle:function(t,e){return new u["c"]({image:new h["a"]({radius:t,fill:new f["a"]({color:"rgba(255,0,0,".concat(e,")")})})})},handleAlarm:function(){this.alarming=!0,this.pointLayer=this.initFeature(),this.map.addLayer(this.pointLayer),this.pointLayer.on("postrender",this.animation)},handleCancel:function(){this.alarming&&(this.alarming=!1,this.map.removeLayer(this.pointLayer),this.pointLayer.un("postrender",this.animation))}}},v=P,C=(n("9512"),n("2877")),w=Object(C["a"])(v,i,o,!1,null,"6b82d9dd",null);e["default"]=w.exports},"20c2":function(t,e,n){},"834d":function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n("c946"),o=(n("617d"),n("a896")),r=n("30d1"),a=n("256f");function s(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");var e,n=t.inversePixelTransform[0],s=t.frameState,p=Object(o["f"])(t.inversePixelTransform.slice(),s.coordinateToPixelTransform),c=Object(r["b"])(s.viewState.resolution,n),l=Object(a["l"])();return l&&(e=Object(a["k"])(l,s.viewState.projection)),new i["a"](t.context,n,s.extent,p,s.viewState.rotation,c,e)}},9512:function(t,e,n){"use strict";n("20c2")}}]);