(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0abf82eb"],{"6747a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"map",staticClass:"map-container",attrs:{id:"map"}})},r=[],o=(a("fb6a"),a("d81d"),a("69af")),i=(a("5bc0"),a("5eee")),s=a("d0e9"),c=a("480c"),d=a("a2c7"),p=a("4cdf"),l=a("7a09"),h=a("5bc3"),f=a("f403"),u=a("6c77"),w=a("8682"),m=a("83a6"),b=a("8295"),k=a("ce2c"),y=a("3e6b"),v=a("5831"),g=a("834d"),L=a("ca42"),x={name:"TrackLine",mixins:[o["a"]],data:function(){return{map:null,speed:300,trackObj:[{coordinate:[13382758.600105051,3529634.5145874037],speed:1.2},{coordinate:[13383231.554217564,3529644.0692159394],speed:1.3},{coordinate:[13383393.98290267,3529648.846530207],speed:1.1},{coordinate:[13383475.197245223,3529687.06504435],speed:.6},{coordinate:[13383532.525016438,3529734.838187028],speed:1.4},{coordinate:[13383575.520844849,3529820.829843849],speed:1.2},{coordinate:[13383651.957873134,3529892.489557866],speed:1.3},{coordinate:[13383752.281472757,3529949.81732908],speed:1.3},{coordinate:[13383905.155529328,3530007.145100294],speed:1.2},{coordinate:[13384024.588386023,3530016.69972883],speed:1},{coordinate:[13384191.794385398,3530026.2543573654],speed:1.5},{coordinate:[13384411.550841717,3530035.808985901],speed:1.8},{coordinate:[13384636.084612304,3530097.9140713825],speed:1.6},{coordinate:[13384841.509125821,3530193.460356739],speed:1.7},{coordinate:[13384960.941982517,3530284.2293278277],speed:1.2},{coordinate:[13385118.593353355,3530379.775613184],speed:1.4},{coordinate:[13385261.91278139,3530503.9857841474],speed:1.8},{coordinate:[13385419.564152228,3530585.2001267006],speed:1.1},{coordinate:[13385591.54746587,3530661.6371549857],speed:1},{coordinate:[13385878.186321938,3530742.851497539],speed:2},{coordinate:[13386174.379806545,3530809.7338972883],speed:1.9},{coordinate:[13386461.018662613,3530881.393611306],speed:1.6},{coordinate:[13386699.884376004,3530723.7422404676],speed:1.7},{coordinate:[13386852.758432575,3530609.08669804],speed:1.3},{coordinate:[13386967.413975002,3530403.6621845234],speed:1.6},{coordinate:[13387005.632489145,3530226.901556614],speed:1.8},{coordinate:[13387010.409803413,3530083.5821285793],speed:1.5},{coordinate:[13386981.745917806,3529964.1492718835],speed:1.7},{coordinate:[13386890.976946717,3529844.716415188],speed:1.9},{coordinate:[13386790.653347094,3529706.1743014213],speed:1.4},{coordinate:[13386633.001976255,3529591.518758993],speed:1.2},{coordinate:[13386451.464034079,3529510.3044164404],speed:1.4},{coordinate:[13386040.615007045,3529639.2919016713],speed:1.6},{coordinate:[13385796.971979385,3529706.1743014213],speed:1.5},{coordinate:[13385534.219694655,3529782.6113297064],speed:1.7},{coordinate:[13385333.572495406,3529935.4853862766],speed:1.9},{coordinate:[13385319.240552604,3530193.460356739],speed:1.1},{coordinate:[13385118.593353355,3530437.103384398],speed:1.8},{coordinate:[13384793.735983143,3530599.5320695043],speed:1.3},{coordinate:[13384363.777699038,3530747.6288118064],speed:1.7}],length:10,trackLayer:null,start:Date.now(),timer:null}},computed:{trackData:function(){return this.trackObj.slice(0,this.length)}},mounted:function(){var e=this;this.initMap(),this.timer=setInterval((function(){e.length<40?e.length++:e.length=2}),500)},watch:{trackData:function(e){this.trackLayer&&(this.trackLayer.un("postrender",this.animation),this.map.removeLayer(this.trackLayer),this.trackLayer=null,this.trackLayer=this.drawTrack(e),this.map.addLayer(this.trackLayer),this.trackLayer.on("postrender",this.animation))}},beforeDestroy:function(){this.trackLayer&&this.trackLayer.un("postrender",this.animation),this.timer&&(clearInterval(this.timer),this.timer=null)},methods:{initMap:function(){this.map=new i["a"]({target:"map",layers:[new c["a"]({source:new s["a"]})],view:new d["a"]({center:[13384755.517469,3529894.878215],zoom:15})}),this.trackLayer=this.drawTrack(this.trackData),this.map.addLayer(this.trackLayer),this.trackLayer.on("postrender",this.animation),this.map.on("singleclick",(function(e){var t=e.coordinate;console.log(t)}))},drawTrack:function(e){var t=e.map((function(e){return e.coordinate})),a=t.length,n=new p["a"]({geometry:new l["a"](t),style:new u["c"]({stroke:new w["a"]({color:"red",lineDash:[7,10],width:2})})}),r=this.getArrowPoints(t),o=new p["a"]({geometry:new h["a"]([r]),style:new u["c"]({fill:new m["a"]({color:"red"})})}),i=new p["a"]({geometry:new f["a"](t[a-1]),style:new u["c"]({text:new b["a"]({text:"".concat(e[a-1].speed," m/s"),fill:new m["a"]({color:"#fff"}),backgroundFill:new m["a"]({color:"rgba(43,91,87,0.60)"}),backgroundStroke:new w["a"]({color:"#7bb0b5"}),padding:[5,6,5,6],offsetX:-18,offsetY:-18,textAlign:"start",placement:"point"})})});return new y["a"]({style:function(e){return e.get("style")},source:new v["a"]({features:[n,o,i]})})},getArrowPoints:function(e){var t=66,a=20,n=e.length,r=e[n-2],o=e[n-1],i=180*Math.atan2(o[1]-r[1],o[0]-r[0])/Math.PI,s=[],c=[];return s[0]=o[0]-Math.cos((i+a)*Math.PI/180)*t,s[1]=o[1]-Math.sin((i+a)*Math.PI/180)*t,c[0]=o[0]-Math.cos((i-a)*Math.PI/180)*t,c[1]=o[1]-Math.sin((i-a)*Math.PI/180)*t,[o,s,c,o]},animation:function(e){var t=Object(g["a"])(e),a=e.frameState,n=a.time-this.start,r=10,o=.5;n>this.speed?(r=10,o=.5,this.start=Date.now()):(r=10*Object(L["b"])(n/this.speed),o*=Object(L["b"])(1-n/this.speed)),t.setStyle(new u["c"]({image:new k["a"]({radius:r,fill:new m["a"]({color:"rgba(255,0,0,".concat(o,")")})})}));var i=new f["a"](this.trackData[this.length-1].coordinate);t.drawGeometry(i),this.map.render()}}},M=x,j=a("2877"),O=Object(j["a"])(M,n,r,!1,null,null,null);t["default"]=O.exports},"834d":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("c946"),r=(a("617d"),a("a896")),o=a("30d1"),i=a("256f");function s(e){if(!(e.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");var t,a=e.inversePixelTransform[0],s=e.frameState,c=Object(r["f"])(e.inversePixelTransform.slice(),s.coordinateToPixelTransform),d=Object(o["b"])(s.viewState.resolution,a),p=Object(i["l"])();return p&&(t=Object(i["k"])(p,s.viewState.projection)),new n["a"](e.context,a,s.extent,c,s.viewState.rotation,d,t)}},fb6a:function(e,t,a){"use strict";var n=a("23e7"),r=a("da84"),o=a("e8b5"),i=a("68ee"),s=a("861d"),c=a("23cb"),d=a("07fa"),p=a("fc6a"),l=a("8418"),h=a("b622"),f=a("1dde"),u=a("f36a"),w=f("slice"),m=h("species"),b=r.Array,k=Math.max;n({target:"Array",proto:!0,forced:!w},{slice:function(e,t){var a,n,r,h=p(this),f=d(h),w=c(e,f),y=c(void 0===t?f:t,f);if(o(h)&&(a=h.constructor,i(a)&&(a===b||o(a.prototype))?a=void 0:s(a)&&(a=a[m],null===a&&(a=void 0)),a===b||void 0===a))return u(h,w,y);for(n=new(void 0===a?b:a)(k(y-w,0)),r=0;w<y;w++,r++)w in h&&l(n,r,h[w]);return n.length=r,n}})}}]);