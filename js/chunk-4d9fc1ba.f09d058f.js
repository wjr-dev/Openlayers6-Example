(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4d9fc1ba"],{"1c21":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"map-box"},[a("div",{ref:"map",staticClass:"map-container",attrs:{id:"map"}}),a("div",{staticClass:"button-box"},[a("a-button",{attrs:{type:"primary"},on:{click:e.handleAlarm}},[e._v(" 报警 ")]),a("a-button",{on:{click:e.handleCancel}},[e._v("取消")])],1)])},r=[],o=(a("d81d"),a("69af")),i=(a("5bc0"),a("5eee")),s=a("d0e9"),c=a("480c"),l=a("a2c7"),u=a("4cdf"),h=a("5bc3"),d=a("6c77"),m=a("8682"),f=a("83a6"),p=a("3e6b"),w=a("5831"),y=a("834d"),v=a("ca42"),g={name:"DefenceAlarm",mixins:[o["a"]],data:function(){return{map:null,vectorLayer:null,vectorSource:null,polygonFeature:null,polygonGeom:null,polygonPoints:[[[13382858.923704674,3530585.2001267006],[13382916.25147589,3529605.850701797],[13383967.260614809,3529677.510415814],[13383957.705986274,3530599.5320695043],[13382858.923704674,3530585.2001267006]]],alarmFeature:null,speed:600,start:Date.now(),alarming:!1}},mounted:function(){this.initMap()},beforeDestroy:function(){this.handleCancel()},methods:{initMap:function(){this.map=new i["a"]({target:"map",layers:[new c["a"]({source:new s["a"]})],view:new l["a"]({center:[13384755.517469,3529894.878215],zoom:15})}),this.vectorLayer=this.getPolygon(),this.map.addLayer(this.vectorLayer)},getPolygon:function(){return this.polygonGeom=new h["a"](this.polygonPoints),this.polygonFeature=new u["a"]({geometry:this.polygonGeom,style:this.getStyle()}),this.vectorSource=new w["a"]({features:[this.polygonFeature]}),new p["a"]({style:function(e){return e.get("style")},source:this.vectorSource})},getStyle:function(){return new d["c"]({stroke:new m["a"]({color:"rgba(250,173,20,1)",width:3}),fill:new f["a"]({color:"rgba(250,173,20,0.2)"})})},getAlramStyle:function(e){return new d["c"]({stroke:new m["a"]({color:"rgba(255,0,0,".concat(e,")"),width:4*(e+.2)}),fill:new f["a"]({color:"rgba(250,0,0,0.3)"})})},animate:function(e){var t=Object(y["a"])(e),a=e.frameState,n=a.time-this.start,r=1,o=1,i=n;n>this.speed?(r=1,o=1,this.start=Date.now()):(o*=Object(v["d"])(1-n/this.speed),i<this.speed&&(i=1*this.speed),r=1.03*Object(v["d"])(i/this.speed));var s=this.polygonGeom.clone();s.scale(r,r),t.setStyle(this.getAlramStyle(o)),t.drawGeometry(s),this.map.render()},getAlarmFeature:function(){var e=new d["c"]({stroke:new m["a"]({color:"rgba(255,0,0,0)",width:3}),fill:new f["a"]({color:"rgba(255,0,0,0)"})});return this.alarmFeature=this.polygonFeature.clone(),this.alarmFeature.setStyle(e),this.alarmFeature},handleAlarm:function(){this.vectorSource.addFeature(this.getAlarmFeature()),this.vectorLayer.on("postrender",this.animate)},handleCancel:function(){this.vectorLayer.un("postrender",this.animate),this.vectorSource.removeFeature(this.alarmFeature)}}},b=g,S=a("2877"),F=Object(S["a"])(b,n,r,!1,null,null,null);t["default"]=F.exports},"834d":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a("c946"),r=(a("617d"),a("a896")),o=a("30d1"),i=a("256f");function s(e){if(!(e.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");var t,a=e.inversePixelTransform[0],s=e.frameState,c=Object(r["f"])(e.inversePixelTransform.slice(),s.coordinateToPixelTransform),l=Object(o["b"])(s.viewState.resolution,a),u=Object(i["l"])();return u&&(t=Object(i["k"])(u,s.viewState.projection)),new n["a"](e.context,a,s.extent,c,s.viewState.rotation,l,t)}}}]);