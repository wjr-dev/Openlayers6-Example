(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5df88e60"],{"057f":function(t,e,i){var n=i("c6b6"),r=i("fc6a"),o=i("241c").f,s=i("4dae"),a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],h=function(t){try{return o(t)}catch(e){return s(a)}};t.exports.f=function(t){return a&&"Window"==n(t)?h(t):o(r(t))}},"0710":function(t,e,i){"use strict";var n=i("e269"),r=i("592d"),o={BOTTOM_LEFT:"bottom-left",BOTTOM_CENTER:"bottom-center",BOTTOM_RIGHT:"bottom-right",CENTER_LEFT:"center-left",CENTER_CENTER:"center-center",CENTER_RIGHT:"center-right",TOP_LEFT:"top-left",TOP_CENTER:"top-center",TOP_RIGHT:"top-right"},s=i("cd7e"),a=i("0af5"),h=i("1e8d"),c=i("0999"),u=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),d={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"},l=function(t){function e(e){var i=t.call(this)||this;i.on,i.once,i.un,i.options=e,i.id=e.id,i.insertFirst=void 0===e.insertFirst||e.insertFirst,i.stopEvent=void 0===e.stopEvent||e.stopEvent,i.element=document.createElement("div"),i.element.className=void 0!==e.className?e.className:"ol-overlay-container "+s["d"],i.element.style.position="absolute",i.element.style.pointerEvents="auto";var n=e.autoPan;return n&&"object"!==typeof n&&(n={animation:e.autoPanAnimation,margin:e.autoPanMargin}),i.autoPan=n||!1,i.rendered={transform_:"",visible:!0},i.mapPostrenderListenerKey=null,i.addChangeListener(d.ELEMENT,i.handleElementChanged),i.addChangeListener(d.MAP,i.handleMapChanged),i.addChangeListener(d.OFFSET,i.handleOffsetChanged),i.addChangeListener(d.POSITION,i.handlePositionChanged),i.addChangeListener(d.POSITIONING,i.handlePositioningChanged),void 0!==e.element&&i.setElement(e.element),i.setOffset(void 0!==e.offset?e.offset:[0,0]),i.setPositioning(void 0!==e.positioning?e.positioning:o.TOP_LEFT),void 0!==e.position&&i.setPosition(e.position),i}return u(e,t),e.prototype.getElement=function(){return this.get(d.ELEMENT)},e.prototype.getId=function(){return this.id},e.prototype.getMap=function(){return this.get(d.MAP)},e.prototype.getOffset=function(){return this.get(d.OFFSET)},e.prototype.getPosition=function(){return this.get(d.POSITION)},e.prototype.getPositioning=function(){return this.get(d.POSITIONING)},e.prototype.handleElementChanged=function(){Object(c["d"])(this.element);var t=this.getElement();t&&this.element.appendChild(t)},e.prototype.handleMapChanged=function(){this.mapPostrenderListenerKey&&(Object(c["e"])(this.element),Object(h["c"])(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);var t=this.getMap();if(t){this.mapPostrenderListenerKey=Object(h["a"])(t,r["a"].POSTRENDER,this.render,this),this.updatePixelPosition();var e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}},e.prototype.render=function(){this.updatePixelPosition()},e.prototype.handleOffsetChanged=function(){this.updatePixelPosition()},e.prototype.handlePositionChanged=function(){this.updatePixelPosition(),this.performAutoPan()},e.prototype.handlePositioningChanged=function(){this.updatePixelPosition()},e.prototype.setElement=function(t){this.set(d.ELEMENT,t)},e.prototype.setMap=function(t){this.set(d.MAP,t)},e.prototype.setOffset=function(t){this.set(d.OFFSET,t)},e.prototype.setPosition=function(t){this.set(d.POSITION,t)},e.prototype.performAutoPan=function(){this.autoPan&&this.panIntoView(this.autoPan)},e.prototype.panIntoView=function(t){var e=this.getMap();if(e&&e.getTargetElement()&&this.get(d.POSITION)){var i=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),r=this.getRect(n,[Object(c["c"])(n),Object(c["b"])(n)]),o=t||{},s=void 0===o.margin?20:o.margin;if(!Object(a["g"])(i,r)){var h=r[0]-i[0],u=i[2]-r[2],l=r[1]-i[1],f=i[3]-r[3],p=[0,0];if(h<0?p[0]=h-s:u<0&&(p[0]=Math.abs(u)+s),l<0?p[1]=l-s:f<0&&(p[1]=Math.abs(f)+s),0!==p[0]||0!==p[1]){var g=e.getView().getCenterInternal(),_=e.getPixelFromCoordinateInternal(g);if(!_)return;var y=[_[0]+p[0],_[1]+p[1]],v=o.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(y),duration:v.duration,easing:v.easing})}}}},e.prototype.getRect=function(t,e){var i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,r=i.top+window.pageYOffset;return[n,r,n+e[0],r+e[1]]},e.prototype.setPositioning=function(t){this.set(d.POSITIONING,t)},e.prototype.setVisible=function(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)},e.prototype.updatePixelPosition=function(){var t=this.getMap(),e=this.getPosition();if(t&&t.isRendered()&&e){var i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}else this.setVisible(!1)},e.prototype.updateRenderedPosition=function(t,e){var i=this.element.style,n=this.getOffset(),r=this.getPositioning();this.setVisible(!0);var s=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px",h="0%",c="0%";r==o.BOTTOM_RIGHT||r==o.CENTER_RIGHT||r==o.TOP_RIGHT?h="-100%":r!=o.BOTTOM_CENTER&&r!=o.CENTER_CENTER&&r!=o.TOP_CENTER||(h="-50%"),r==o.BOTTOM_LEFT||r==o.BOTTOM_CENTER||r==o.BOTTOM_RIGHT?c="-100%":r!=o.CENTER_LEFT&&r!=o.CENTER_CENTER&&r!=o.CENTER_RIGHT||(c="-50%");var u="translate("+h+", "+c+") translate("+s+", "+a+")";this.rendered.transform_!=u&&(this.rendered.transform_=u,i.transform=u,i.msTransform=u)},e.prototype.getOptions=function(){return this.options},e}(n["a"]);e["a"]=l},"159b":function(t,e,i){var n=i("da84"),r=i("fdbc"),o=i("785a"),s=i("17c2"),a=i("9112"),h=function(t){if(t&&t.forEach!==s)try{a(t,"forEach",s)}catch(e){t.forEach=s}};for(var c in r)r[c]&&h(n[c]&&n[c].prototype);h(o)},"17c2":function(t,e,i){"use strict";var n=i("b727").forEach,r=i("a640"),o=r("forEach");t.exports=o?[].forEach:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}},"428f":function(t,e,i){var n=i("da84");t.exports=n},"47e4":function(t,e,i){"use strict";var n=i("521b"),r=i("f623"),o=i("7a09"),s=i("9abc"),a=i("9769"),h=i("0af5"),c=i("abb7"),u=i("1c48"),d=i("9f5e"),l=i("bb6c"),f=i("b1a2"),p=i("c560"),g=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),_=function(t){function e(e,i,n){var r=t.call(this)||this;if(r.ends_=[],r.maxDelta_=-1,r.maxDeltaRevision_=-1,Array.isArray(e[0]))r.setCoordinates(e,i);else if(void 0!==i&&n)r.setFlatCoordinates(i,e),r.ends_=n;else{for(var o=r.getLayout(),s=e,a=[],h=[],c=0,u=s.length;c<u;++c){var l=s[c];0===c&&(o=l.getLayout()),Object(d["c"])(a,l.getFlatCoordinates()),h.push(a.length)}r.setFlatCoordinates(o,a),r.ends_=h}return r}return g(e,t),e.prototype.appendLineString=function(t){this.flatCoordinates?Object(d["c"])(this.flatCoordinates,t.getFlatCoordinates().slice()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(h["e"])(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(a["a"])(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(a["b"])(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.getCoordinateAtM=function(t,e,i){if(this.layout!=n["a"].XYM&&this.layout!=n["a"].XYZM||0===this.flatCoordinates.length)return null;var r=void 0!==e&&e,o=void 0!==i&&i;return Object(f["c"])(this.flatCoordinates,0,this.ends_,this.stride,t,r,o)},e.prototype.getCoordinates=function(){return Object(l["b"])(this.flatCoordinates,0,this.ends_,this.stride)},e.prototype.getEnds=function(){return this.ends_},e.prototype.getLineString=function(t){return t<0||this.ends_.length<=t?null:new o["a"](this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)},e.prototype.getLineStrings=function(){for(var t=this.flatCoordinates,e=this.ends_,i=this.layout,n=[],r=0,s=0,a=e.length;s<a;++s){var h=e[s],c=new o["a"](t.slice(r,h),i);n.push(c),r=h}return n},e.prototype.getFlatMidpoints=function(){for(var t=[],e=this.flatCoordinates,i=0,n=this.ends_,r=this.stride,o=0,s=n.length;o<s;++o){var a=n[o],h=Object(f["a"])(e,i,a,r,.5);Object(d["c"])(t,h),i=a}return t},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=Object(u["b"])(this.flatCoordinates,0,this.ends_,this.stride,t,i,0,r),new e(i,n["a"].XY,r)},e.prototype.getType=function(){return r["a"].MULTI_LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(p["b"])(this.flatCoordinates,0,this.ends_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);var i=Object(c["c"])(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()},e}(s["a"]);e["a"]=_},"4c2a":function(t,e,i){"use strict";i("64ce")},"4dae":function(t,e,i){var n=i("da84"),r=i("23cb"),o=i("07fa"),s=i("8418"),a=n.Array,h=Math.max;t.exports=function(t,e,i){for(var n=o(t),c=r(e,n),u=r(void 0===i?n:i,n),d=a(h(u-c,0)),l=0;c<u;c++,l++)s(d,l,t[c]);return d.length=l,d}},"4de4":function(t,e,i){"use strict";var n=i("23e7"),r=i("b727").filter,o=i("1dde"),s=o("filter");n({target:"Array",proto:!0,forced:!s},{filter:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},5530:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));i("b64b"),i("a4d3"),i("4de4"),i("d3b7"),i("e439"),i("159b"),i("dbb4");var n=i("ade3");function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach((function(e){Object(n["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}},"64ce":function(t,e,i){},"746f":function(t,e,i){var n=i("428f"),r=i("1a2d"),o=i("e5383"),s=i("9bf2").f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});r(e,t)||s(e,t,{value:o.f(t)})}},"7a09":function(t,e,i){"use strict";var n=i("521b"),r=i("f623"),o=i("9abc"),s=i("9769"),a=i("0af5"),h=i("abb7"),c=i("1c48"),u=i("9f5e"),d=i("fd4d"),l=i("bb6c"),f=i("b1a2"),p=i("c560"),g=i("5938"),_=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),y=function(t){function e(e,i){var n=t.call(this)||this;return n.flatMidpoint_=null,n.flatMidpointRevision_=-1,n.maxDelta_=-1,n.maxDeltaRevision_=-1,void 0===i||Array.isArray(e[0])?n.setCoordinates(e,i):n.setFlatCoordinates(i,e),n}return _(e,t),e.prototype.appendCoordinate=function(t){this.flatCoordinates?Object(u["c"])(this.flatCoordinates,t):this.flatCoordinates=t.slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(a["e"])(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(s["e"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(s["d"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,n))},e.prototype.forEachSegment=function(t){return Object(d["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.getCoordinateAtM=function(t,e){if(this.layout!=n["a"].XYM&&this.layout!=n["a"].XYZM)return null;var i=void 0!==e&&e;return Object(f["b"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i)},e.prototype.getCoordinates=function(){return Object(l["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getCoordinateAt=function(t,e){return Object(f["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)},e.prototype.getLength=function(){return Object(g["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getFlatMidpoint=function(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[];return i.length=Object(c["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,i,0),new e(i,n["a"].XY)},e.prototype.getType=function(){return r["a"].LINE_STRING},e.prototype.intersectsExtent=function(t){return Object(p["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(h["b"])(this.flatCoordinates,0,t,this.stride),this.changed()},e}(o["a"]);e["a"]=y},"88da":function(t,e,i){"use strict";var n=i("521b"),r=i("f623"),o=i("9a44"),s=i("5bc3"),a=i("9abc"),h=i("9769"),c=i("0af5"),u=i("abb7"),d=i("9f5e"),l=i("0a9d"),f=i("bb6c"),p=i("c560"),g=i("4d98"),_=i("b589");function y(t,e,i,n){for(var r=[],o=Object(c["j"])(),s=0,a=i.length;s<a;++s){var h=i[s];o=Object(c["n"])(t,e,h[0],n),r.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=h[h.length-1]}return r}var v=i("25f1"),m=i("1c48"),b=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),O=function(t){function e(e,i,n){var r=t.call(this)||this;if(r.endss_=[],r.flatInteriorPointsRevision_=-1,r.flatInteriorPoints_=null,r.maxDelta_=-1,r.maxDeltaRevision_=-1,r.orientedRevision_=-1,r.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){for(var o=r.getLayout(),s=e,a=[],h=[],c=0,u=s.length;c<u;++c){var l=s[c];0===c&&(o=l.getLayout());for(var f=a.length,p=l.getEnds(),g=0,_=p.length;g<_;++g)p[g]+=f;Object(d["c"])(a,l.getFlatCoordinates()),h.push(p)}i=o,e=a,n=h}return void 0!==i&&n?(r.setFlatCoordinates(i,e),r.endss_=n):r.setCoordinates(e,i),r}return b(e,t),e.prototype.appendPolygon=function(t){var e;if(this.flatCoordinates){var i=this.flatCoordinates.length;Object(d["c"])(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(var n=0,r=e.length;n<r;++n)e[n]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()},e.prototype.clone=function(){for(var t=this.endss_.length,i=new Array(t),n=0;n<t;++n)i[n]=this.endss_[n].slice();var r=new e(this.flatCoordinates.slice(),this.layout,i);return r.applyProperties(this),r},e.prototype.closestPointXY=function(t,e,i,n){return n<Object(c["e"])(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Object(h["f"])(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Object(h["c"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,n))},e.prototype.containsXY=function(t,e){return Object(v["d"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)},e.prototype.getArea=function(){return Object(_["c"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)},e.prototype.getCoordinates=function(t){var e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),Object(g["d"])(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,Object(f["c"])(e,0,this.endss_,this.stride)},e.prototype.getEndss=function(){return this.endss_},e.prototype.getFlatInteriorPoints=function(){if(this.flatInteriorPointsRevision_!=this.getRevision()){var t=y(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=Object(l["b"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_},e.prototype.getInteriorPoints=function(){return new o["a"](this.getFlatInteriorPoints().slice(),n["a"].XYM)},e.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var t=this.flatCoordinates;Object(g["b"])(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Object(g["d"])(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},e.prototype.getSimplifiedGeometryInternal=function(t){var i=[],r=[];return i.length=Object(m["d"])(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),i,0,r),new e(i,n["a"].XY,r)},e.prototype.getPolygon=function(t){if(t<0||this.endss_.length<=t)return null;var e;if(0===t)e=0;else{var i=this.endss_[t-1];e=i[i.length-1]}var n=this.endss_[t].slice(),r=n[n.length-1];if(0!==e)for(var o=0,a=n.length;o<a;++o)n[o]-=e;return new s["a"](this.flatCoordinates.slice(e,r),this.layout,n)},e.prototype.getPolygons=function(){for(var t=this.layout,e=this.flatCoordinates,i=this.endss_,n=[],r=0,o=0,a=i.length;o<a;++o){var h=i[o].slice(),c=h[h.length-1];if(0!==r)for(var u=0,d=h.length;u<d;++u)h[u]-=r;var l=new s["a"](e.slice(r,c),t,h);n.push(l),r=c}return n},e.prototype.getType=function(){return r["a"].MULTI_POLYGON},e.prototype.intersectsExtent=function(t){return Object(p["d"])(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);var i=Object(u["d"])(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{var n=i[i.length-1];this.flatCoordinates.length=0===n.length?0:n[n.length-1]}this.changed()},e}(a["a"]);e["a"]=O},"9a44":function(t,e,i){"use strict";var n=i("f623"),r=i("f403"),o=i("9abc"),s=i("0af5"),a=i("abb7"),h=i("9f5e"),c=i("bb6c"),u=i("7fc9"),d=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),l=function(t){function e(e,i){var n=t.call(this)||this;return i&&!Array.isArray(e[0])?n.setFlatCoordinates(i,e):n.setCoordinates(e,i),n}return d(e,t),e.prototype.appendPoint=function(t){this.flatCoordinates?Object(h["c"])(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.changed()},e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){if(n<Object(s["e"])(this.getExtent(),t,e))return n;for(var r=this.flatCoordinates,o=this.stride,a=0,h=r.length;a<h;a+=o){var c=Object(u["i"])(t,e,r[a],r[a+1]);if(c<n){n=c;for(var d=0;d<o;++d)i[d]=r[a+d];i.length=o}}return n},e.prototype.getCoordinates=function(){return Object(c["a"])(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},e.prototype.getPoint=function(t){var e=this.flatCoordinates?this.flatCoordinates.length/this.stride:0;return t<0||e<=t?null:new r["a"](this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)},e.prototype.getPoints=function(){for(var t=this.flatCoordinates,e=this.layout,i=this.stride,n=[],o=0,s=t.length;o<s;o+=i){var a=new r["a"](t.slice(o,o+i),e);n.push(a)}return n},e.prototype.getType=function(){return n["a"].MULTI_POINT},e.prototype.intersectsExtent=function(t){for(var e=this.flatCoordinates,i=this.stride,n=0,r=e.length;n<r;n+=i){var o=e[n],a=e[n+1];if(Object(s["h"])(t,o,a))return!0}return!1},e.prototype.setCoordinates=function(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Object(a["b"])(this.flatCoordinates,0,t,this.stride),this.changed()},e}(o["a"]);e["a"]=l},a4d3:function(t,e,i){"use strict";var n=i("23e7"),r=i("da84"),o=i("d066"),s=i("2ba4"),a=i("c65b"),h=i("e330"),c=i("c430"),u=i("83ab"),d=i("4930"),l=i("d039"),f=i("1a2d"),p=i("e8b5"),g=i("1626"),_=i("861d"),y=i("3a9b"),v=i("d9b5"),m=i("825a"),b=i("7b0b"),O=i("fc6a"),C=i("a04b"),P=i("577e"),E=i("5c6c"),w=i("7c73"),T=i("df75"),j=i("241c"),x=i("057f"),F=i("7418"),I=i("06cf"),S=i("9bf2"),L=i("37e8"),R=i("d1e7"),N=i("f36a"),M=i("6eeb"),G=i("5692"),k=i("f772"),D=i("d012"),A=i("90e3"),B=i("b622"),V=i("e5383"),Y=i("746f"),U=i("d44e"),H=i("69f3"),q=i("b727").forEach,X=k("hidden"),W="Symbol",K="prototype",J=B("toPrimitive"),z=H.set,Z=H.getterFor(W),$=Object[K],Q=r.Symbol,tt=Q&&Q[K],et=r.TypeError,it=r.QObject,nt=o("JSON","stringify"),rt=I.f,ot=S.f,st=x.f,at=R.f,ht=h([].push),ct=G("symbols"),ut=G("op-symbols"),dt=G("string-to-symbol-registry"),lt=G("symbol-to-string-registry"),ft=G("wks"),pt=!it||!it[K]||!it[K].findChild,gt=u&&l((function(){return 7!=w(ot({},"a",{get:function(){return ot(this,"a",{value:7}).a}})).a}))?function(t,e,i){var n=rt($,e);n&&delete $[e],ot(t,e,i),n&&t!==$&&ot($,e,n)}:ot,_t=function(t,e){var i=ct[t]=w(tt);return z(i,{type:W,tag:t,description:e}),u||(i.description=e),i},yt=function(t,e,i){t===$&&yt(ut,e,i),m(t);var n=C(e);return m(i),f(ct,n)?(i.enumerable?(f(t,X)&&t[X][n]&&(t[X][n]=!1),i=w(i,{enumerable:E(0,!1)})):(f(t,X)||ot(t,X,E(1,{})),t[X][n]=!0),gt(t,n,i)):ot(t,n,i)},vt=function(t,e){m(t);var i=O(e),n=T(i).concat(Pt(i));return q(n,(function(e){u&&!a(bt,i,e)||yt(t,e,i[e])})),t},mt=function(t,e){return void 0===e?w(t):vt(w(t),e)},bt=function(t){var e=C(t),i=a(at,this,e);return!(this===$&&f(ct,e)&&!f(ut,e))&&(!(i||!f(this,e)||!f(ct,e)||f(this,X)&&this[X][e])||i)},Ot=function(t,e){var i=O(t),n=C(e);if(i!==$||!f(ct,n)||f(ut,n)){var r=rt(i,n);return!r||!f(ct,n)||f(i,X)&&i[X][n]||(r.enumerable=!0),r}},Ct=function(t){var e=st(O(t)),i=[];return q(e,(function(t){f(ct,t)||f(D,t)||ht(i,t)})),i},Pt=function(t){var e=t===$,i=st(e?ut:O(t)),n=[];return q(i,(function(t){!f(ct,t)||e&&!f($,t)||ht(n,ct[t])})),n};if(d||(Q=function(){if(y(tt,this))throw et("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?P(arguments[0]):void 0,e=A(t),i=function(t){this===$&&a(i,ut,t),f(this,X)&&f(this[X],e)&&(this[X][e]=!1),gt(this,e,E(1,t))};return u&&pt&&gt($,e,{configurable:!0,set:i}),_t(e,t)},tt=Q[K],M(tt,"toString",(function(){return Z(this).tag})),M(Q,"withoutSetter",(function(t){return _t(A(t),t)})),R.f=bt,S.f=yt,L.f=vt,I.f=Ot,j.f=x.f=Ct,F.f=Pt,V.f=function(t){return _t(B(t),t)},u&&(ot(tt,"description",{configurable:!0,get:function(){return Z(this).description}}),c||M($,"propertyIsEnumerable",bt,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!d,sham:!d},{Symbol:Q}),q(T(ft),(function(t){Y(t)})),n({target:W,stat:!0,forced:!d},{for:function(t){var e=P(t);if(f(dt,e))return dt[e];var i=Q(e);return dt[e]=i,lt[i]=e,i},keyFor:function(t){if(!v(t))throw et(t+" is not a symbol");if(f(lt,t))return lt[t]},useSetter:function(){pt=!0},useSimple:function(){pt=!1}}),n({target:"Object",stat:!0,forced:!d,sham:!u},{create:mt,defineProperty:yt,defineProperties:vt,getOwnPropertyDescriptor:Ot}),n({target:"Object",stat:!0,forced:!d},{getOwnPropertyNames:Ct,getOwnPropertySymbols:Pt}),n({target:"Object",stat:!0,forced:l((function(){F.f(1)}))},{getOwnPropertySymbols:function(t){return F.f(b(t))}}),nt){var Et=!d||l((function(){var t=Q();return"[null]"!=nt([t])||"{}"!=nt({a:t})||"{}"!=nt(Object(t))}));n({target:"JSON",stat:!0,forced:Et},{stringify:function(t,e,i){var n=N(arguments),r=e;if((_(e)||void 0!==t)&&!v(t))return p(e)||(e=function(t,e){if(g(r)&&(e=a(r,this,t,e)),!v(e))return e}),n[1]=e,s(nt,null,n)}})}if(!tt[J]){var wt=tt.valueOf;M(tt,J,(function(t){return a(wt,this)}))}U(Q,W),D[X]=!0},a640:function(t,e,i){"use strict";var n=i("d039");t.exports=function(t,e){var i=[][t];return!!i&&n((function(){i.call(null,e||function(){throw 1},1)}))}},ac29:function(t,e,i){"use strict";var n=i("f623"),r=i("9abc"),o=i("0af5"),s=i("abb7"),a=i("bef8"),h=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),c=function(t){function e(e,i,n){var r=t.call(this)||this;if(void 0!==n&&void 0===i)r.setFlatCoordinates(n,e);else{var o=i||0;r.setCenterAndRadius(e,o,n)}return r}return h(e,t),e.prototype.clone=function(){var t=new e(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t},e.prototype.closestPointXY=function(t,e,i,n){var r=this.flatCoordinates,o=t-r[0],s=e-r[1],a=o*o+s*s;if(a<n){if(0===a)for(var h=0;h<this.stride;++h)i[h]=r[h];else{var c=this.getRadius()/Math.sqrt(a);i[0]=r[0]+c*o,i[1]=r[1]+c*s;for(h=2;h<this.stride;++h)i[h]=r[h]}return i.length=this.stride,a}return n},e.prototype.containsXY=function(t,e){var i=this.flatCoordinates,n=t-i[0],r=e-i[1];return n*n+r*r<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return Object(o["k"])(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return n["a"].CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if(Object(o["E"])(t,e)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||(t[1]<=i[1]&&t[3]>=i[1]||Object(o["s"])(t,this.intersectsCoordinate.bind(this)))}return!1},e.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+i;for(var r=1;r<e;++r)n[e+r]=t[r];this.setFlatCoordinates(this.layout,n),this.changed()},e.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,r=Object(s["a"])(n,0,t,this.stride);n[r++]=n[0]+e;for(var o=1,a=this.stride;o<a;++o)n[r++]=n[o];n.length=r,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e.prototype.rotate=function(t,e){var i=this.getCenter(),n=this.getStride();this.setCenter(Object(a["a"])(i,0,i.length,n,t,e,i)),this.changed()},e.prototype.translate=function(t,e){var i=this.getCenter(),n=this.getStride();this.setCenter(Object(a["d"])(i,0,i.length,n,t,e,i)),this.changed()},e}(r["a"]);c.prototype.transform;var u=c,d=i("cef7"),l=i("01d4"),f=i("4cdf"),p=i("bf62"),g=i("7a09"),_=i("509b"),y=i("0b2d"),v=i("47e4"),m=i("9a44"),b=i("88da"),O=i("f403"),C=i("4105"),P=i("5bc3"),E=i("3e6b"),w=i("5831"),T=i("57cb"),j=i("06f8"),x=i("6c77"),F=i("256f"),I=i("a568"),S=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),L={POINT:"Point",LINE_STRING:"LineString",POLYGON:"Polygon",CIRCLE:"Circle"},R={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"},N=function(t){function e(e,i){var n=t.call(this,e)||this;return n.feature=i,n}return S(e,t),e}(d["a"]),M=function(t){function e(e){var i=this,n=e;n.stopDown||(n.stopDown=T["a"]),i=t.call(this,n)||this,i.on,i.once,i.un,i.shouldHandle_=!1,i.downPx_=null,i.downTimeout_,i.lastDragTime_,i.pointerType_,i.freehand_=!1,i.source_=e.source?e.source:null,i.features_=e.features?e.features:null,i.snapTolerance_=e.snapTolerance?e.snapTolerance:12,i.type_=e.type,i.mode_=k(i.type_),i.stopClick_=!!e.stopClick,i.minPoints_=e.minPoints?e.minPoints:i.mode_===L.POLYGON?3:2,i.maxPoints_=i.mode_===L.CIRCLE?2:e.maxPoints?e.maxPoints:1/0,i.finishCondition_=e.finishCondition?e.finishCondition:T["b"];var r=e.geometryFunction;if(!r){var o,s=i.mode_;if(s===L.CIRCLE)r=function(t,e,i){var n=e||new u([NaN,NaN]),r=Object(F["e"])(t[0],i),o=Object(I["i"])(r,Object(F["e"])(t[t.length-1],i));n.setCenterAndRadius(r,Math.sqrt(o));var s=Object(F["l"])();return s&&n.transform(i,s),n};else s===L.POINT?o=O["a"]:s===L.LINE_STRING?o=g["a"]:s===L.POLYGON&&(o=P["a"]),r=function(t,e,i){return e?s===L.POLYGON?t[0].length?e.setCoordinates([t[0].concat([t[0][0]])]):e.setCoordinates([]):e.setCoordinates(t):e=new o(t),e}}return i.geometryFunction_=r,i.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,i.finishCoordinate_=null,i.sketchFeature_=null,i.sketchPoint_=null,i.sketchCoords_=null,i.sketchLine_=null,i.sketchLineCoords_=null,i.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,i.overlay_=new E["a"]({source:new w["a"]({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:G(),updateWhileInteracting:!0}),i.geometryName_=e.geometryName,i.condition_=e.condition?e.condition:j["i"],i.freehandCondition_,e.freehand?i.freehandCondition_=j["d"]:i.freehandCondition_=e.freehandCondition?e.freehandCondition:j["l"],i.addChangeListener(p["a"].ACTIVE,i.updateState_),i}return S(e,t),e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===l["a"].CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!==L.POINT&&this.freehandCondition_(e);var i=e.type===y["a"].POINTERMOVE,n=!0;if(!this.freehand_&&this.lastDragTime_&&e.type===y["a"].POINTERDRAG){var r=Date.now();r-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&e.type===y["a"].POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===y["a"].POINTERDOWN?n=!1:i&&this.getPointerCount()<2?(n=e.type===y["a"].POINTERMOVE,n&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):("mouse"===e.originalEvent.pointerType||e.type===y["a"].POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e)):e.type===y["a"].DBLCLICK&&(n=!1),t.prototype.handleEvent.call(this,e)&&n},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new _["a"](y["a"].POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)},e.prototype.handleUpEvent=function(t){var e=!0;if(0===this.getPointerCount())if(this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t),this.shouldHandle_){var i=!this.finishCoordinate_;i&&this.startDrawing_(t.coordinate),!i&&this.freehand_?this.finishDrawing():this.freehand_||i&&this.mode_!==L.POINT||(this.atFinish_(t.pixel)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing();return!e&&this.stopClick_&&t.preventDefault(),e},e.prototype.handlePointerMove_=function(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,n=e[0]-i[0],r=e[1]-i[1],o=n*n+r*r;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?this.modifyDrawing_(t.coordinate):this.createOrUpdateSketchPoint_(t.coordinate.slice())},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,n=[this.finishCoordinate_],r=this.mode_;if(r===L.POINT)e=!0;else if(r===L.CIRCLE)e=2===this.sketchCoords_.length;else if(r===L.LINE_STRING)i=this.sketchCoords_.length>this.minPoints_;else if(r===L.POLYGON){var o=this.sketchCoords_;i=o[0].length>this.minPoints_,n=[o[0][0],o[0][o[0].length-2]]}if(i)for(var s=this.getMap(),a=0,h=n.length;a<h;a++){var c=n[a],u=s.getPixelFromCoordinate(c),d=t[0]-u[0],l=t[1]-u[1],f=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(d*d+l*l)<=f,e){this.finishCoordinate_=c;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){if(this.sketchPoint_){var e=this.sketchPoint_.getGeometry();e.setCoordinates(t)}else this.sketchPoint_=new f["a"](new O["a"](t)),this.updateSketchFeatures_()},e.prototype.createOrUpdateCustomSketchLine_=function(t){this.sketchLine_||(this.sketchLine_=new f["a"]);var e=t.getLinearRing(0),i=this.sketchLine_.getGeometry();i?(i.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),i.changed()):(i=new g["a"](e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(i))},e.prototype.startDrawing_=function(t){var e=this.getMap().getView().getProjection();this.finishCoordinate_=t,this.mode_===L.POINT?this.sketchCoords_=t.slice():this.mode_===L.POLYGON?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new f["a"](new g["a"](this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new f["a"],this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new N(R.DRAWSTART,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,r=this.getMap(),o=this.sketchFeature_.getGeometry(),s=r.getView().getProjection();if(this.mode_===L.POINT?i=this.sketchCoords_:this.mode_===L.POLYGON?(e=this.sketchCoords_[0],i=e[e.length-1],this.atFinish_(r.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(e=this.sketchCoords_,i=e[e.length-1]),i[0]=t[0],i[1]=t[1],this.geometryFunction_(this.sketchCoords_,o,s),this.sketchPoint_){var a=this.sketchPoint_.getGeometry();a.setCoordinates(t)}if(o.getType()===n["a"].POLYGON&&this.mode_!==L.POLYGON)this.createOrUpdateCustomSketchLine_(o);else if(this.sketchLineCoords_){var h=this.sketchLine_.getGeometry();h.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,n=this.sketchFeature_.getGeometry(),r=this.getMap().getView().getProjection(),o=this.mode_;o===L.LINE_STRING||o===L.CIRCLE?(this.finishCoordinate_=t.slice(),i=this.sketchCoords_,i.length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(t.slice()),this.geometryFunction_(i,n,r)):o===L.POLYGON&&(i=this.sketchCoords_[0],i.length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(t.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,n,r)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry(),i=this.getMap().getView().getProjection(),r=this.mode_;if(r===L.LINE_STRING||r===L.CIRCLE){if(t=this.sketchCoords_,t.splice(-2,1),t.length>=2){this.finishCoordinate_=t[t.length-2].slice();var o=this.finishCoordinate_.slice();t[t.length-1]=o,this.createOrUpdateSketchPoint_(o)}this.geometryFunction_(t,e,i),e.getType()===n["a"].POLYGON&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if(r===L.POLYGON){t=this.sketchCoords_[0],t.splice(-2,1);var s=this.sketchLine_.getGeometry();if(t.length>=2){o=t[t.length-2].slice();t[t.length-1]=o,this.createOrUpdateSketchPoint_(o)}s.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,i)}1===t.length&&this.abortDrawing(),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry(),r=this.getMap().getView().getProjection();this.mode_===L.LINE_STRING?(e.pop(),this.geometryFunction_(e,i,r)):this.mode_===L.POLYGON&&(e[0].pop(),this.geometryFunction_(e,i,r),e=i.getCoordinates()),this.type_===n["a"].MULTI_POINT?t.setGeometry(new m["a"]([e])):this.type_===n["a"].MULTI_LINE_STRING?t.setGeometry(new v["a"]([e])):this.type_===n["a"].MULTI_POLYGON&&t.setGeometry(new b["a"]([e])),this.dispatchEvent(new N(R.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),t},e.prototype.abortDrawing=function(){var t=this.abortDrawing_();t&&this.dispatchEvent(new N(R.DRAWABORT,t))},e.prototype.appendCoordinates=function(t){var e,i=this.mode_,n=!this.sketchFeature_;if(n&&this.startDrawing_(t[0]),i===L.LINE_STRING||i===L.CIRCLE)e=this.sketchCoords_;else{if(i!==L.POLYGON)return;e=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}n&&e.shift(),e.pop();for(var r=0;r<t.length;r++)this.addToDrawing_(t[r]);var o=t[t.length-1];this.addToDrawing_(o),this.modifyDrawing_(o)},e.prototype.extend=function(t){var e=t.getGeometry(),i=e;this.sketchFeature_=t,this.sketchCoords_=i.getCoordinates();var n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.sketchPoint_=new f["a"](new O["a"](n)),this.updateSketchFeatures_(),this.dispatchEvent(new N(R.DRAWSTART,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)},e}(C["b"]);function G(){var t=Object(x["b"])();return function(e,i){return t[e.getGeometry().getType()]}}function k(t){switch(t){case n["a"].POINT:case n["a"].MULTI_POINT:return L.POINT;case n["a"].LINE_STRING:case n["a"].MULTI_LINE_STRING:return L.LINE_STRING;case n["a"].POLYGON:case n["a"].MULTI_POLYGON:return L.POLYGON;case n["a"].CIRCLE:return L.CIRCLE;default:throw new Error("Invalid type: "+t)}}e["a"]=M},ade3:function(t,e,i){"use strict";function n(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,"a",(function(){return n}))},b1a2:function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return a}));var n=i("9f5e"),r=i("7fc9");function o(t,e,i,o,s,a,h){var c,u,d=(i-e)/o;if(1===d)c=e;else if(2===d)c=e,u=s;else if(0!==d){for(var l=t[e],f=t[e+1],p=0,g=[0],_=e+o;_<i;_+=o){var y=t[_],v=t[_+1];p+=Math.sqrt((y-l)*(y-l)+(v-f)*(v-f)),g.push(p),l=y,f=v}var m=s*p,b=Object(n["a"])(g,m);b<0?(u=(m-g[-b-2])/(g[-b-1]-g[-b-2]),c=e+(-b-2)*o):c=e+b*o}var O=h>1?h:2,C=a||new Array(O);for(_=0;_<O;++_)C[_]=void 0===c?NaN:void 0===u?t[c+_]:Object(r["e"])(t[c+_],t[c+o+_],u);return C}function s(t,e,i,n,o,s){if(i==e)return null;var a;if(o<t[e+n-1])return s?(a=t.slice(e,e+n),a[n-1]=o,a):null;if(t[i-1]<o)return s?(a=t.slice(i-n,i),a[n-1]=o,a):null;if(o==t[e+n-1])return t.slice(e,e+n);var h=e/n,c=i/n;while(h<c){var u=h+c>>1;o<t[(u+1)*n-1]?c=u:h=u+1}var d=t[h*n-1];if(o==d)return t.slice((h-1)*n,(h-1)*n+n);var l=t[(h+1)*n-1],f=(o-d)/(l-d);a=[];for(var p=0;p<n-1;++p)a.push(Object(r["e"])(t[(h-1)*n+p],t[h*n+p],f));return a.push(o),a}function a(t,e,i,n,r,o,a){if(a)return s(t,e,i[i.length-1],n,r,o);var h;if(r<t[n-1])return o?(h=t.slice(0,n),h[n-1]=r,h):null;if(t[t.length-1]<r)return o?(h=t.slice(t.length-n),h[n-1]=r,h):null;for(var c=0,u=i.length;c<u;++c){var d=i[c];if(e!=d){if(r<t[e+n-1])return null;if(r<=t[d-1])return s(t,e,d,n,r,!1);e=d}}return null}},b2fc:function(t,e,i){"use strict";var n=i("183a"),r=i("01d4"),o=i("f623"),s=i("4105"),a=i("4a7d"),h=i("a43f"),c=i("57cb"),u=i("0af5"),d=i("a568"),l=i("5bc3"),f=i("256f"),p=i("1300"),g=i("38f3"),_=i("1e8d"),y=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function v(t){return t.feature?t.feature:t.element?t.element:void 0}var m=[],b=function(t){function e(e){var i=this,n=e||{},r=n;return r.handleDownEvent||(r.handleDownEvent=c["b"]),r.stopDown||(r.stopDown=c["a"]),i=t.call(this,r)||this,i.source_=n.source?n.source:null,i.vertex_=void 0===n.vertex||n.vertex,i.edge_=void 0===n.edge||n.edge,i.features_=n.features?n.features:null,i.featuresListenerKeys_=[],i.featureChangeListenerKeys_={},i.indexedFeaturesExtents_={},i.pendingFeatures_={},i.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,i.rBush_=new a["a"],i.SEGMENT_WRITERS_={Point:i.writePointGeometry_.bind(i),LineString:i.writeLineStringGeometry_.bind(i),LinearRing:i.writeLineStringGeometry_.bind(i),Polygon:i.writePolygonGeometry_.bind(i),MultiPoint:i.writeMultiPointGeometry_.bind(i),MultiLineString:i.writeMultiLineStringGeometry_.bind(i),MultiPolygon:i.writeMultiPolygonGeometry_.bind(i),GeometryCollection:i.writeGeometryCollectionGeometry_.bind(i),Circle:i.writeCircleGeometry_.bind(i)},i}return y(e,t),e.prototype.addFeature=function(t,e){var i=void 0===e||e,n=Object(p["c"])(t),o=t.getGeometry();if(o){var s=this.SEGMENT_WRITERS_[o.getType()];s&&(this.indexedFeaturesExtents_[n]=o.getExtent(Object(u["j"])()),s(t,o))}i&&(this.featureChangeListenerKeys_[n]=Object(_["a"])(t,r["a"].CHANGE,this.handleFeatureChange_,this))},e.prototype.forEachFeatureAdd_=function(t){this.addFeature(t)},e.prototype.forEachFeatureRemove_=function(t){this.removeFeature(t)},e.prototype.getFeatures_=function(){var t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t},e.prototype.handleEvent=function(e){var i=this.snapTo(e.pixel,e.coordinate,e.map);return i.snapped&&(e.coordinate=i.vertex.slice(0,2),e.pixel=i.vertexPixel),t.prototype.handleEvent.call(this,e)},e.prototype.handleFeatureAdd_=function(t){var e=v(t);this.addFeature(e)},e.prototype.handleFeatureRemove_=function(t){var e=v(t);this.removeFeature(e)},e.prototype.handleFeatureChange_=function(t){var e=t.target;if(this.handlingDownUpSequence){var i=Object(p["c"])(e);i in this.pendingFeatures_||(this.pendingFeatures_[i]=e)}else this.updateFeature_(e)},e.prototype.handleUpEvent=function(t){var e=Object(g["c"])(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1},e.prototype.removeFeature=function(t,e){var i=void 0===e||e,n=Object(p["c"])(t),r=this.indexedFeaturesExtents_[n];if(r){var o=this.rBush_,s=[];o.forEachInExtent(r,(function(e){t===e.feature&&s.push(e)}));for(var a=s.length-1;a>=0;--a)o.remove(s[a])}i&&(Object(_["c"])(this.featureChangeListenerKeys_[n]),delete this.featureChangeListenerKeys_[n])},e.prototype.setMap=function(e){var i=this.getMap(),r=this.featuresListenerKeys_,o=this.getFeatures_();i&&(r.forEach(_["c"]),r.length=0,o.forEach(this.forEachFeatureRemove_.bind(this))),t.prototype.setMap.call(this,e),e&&(this.features_?r.push(Object(_["a"])(this.features_,n["a"].ADD,this.handleFeatureAdd_,this),Object(_["a"])(this.features_,n["a"].REMOVE,this.handleFeatureRemove_,this)):this.source_&&r.push(Object(_["a"])(this.source_,h["a"].ADDFEATURE,this.handleFeatureAdd_,this),Object(_["a"])(this.source_,h["a"].REMOVEFEATURE,this.handleFeatureRemove_,this)),o.forEach(this.forEachFeatureAdd_.bind(this)))},e.prototype.snapTo=function(t,e,i){var n=i.getCoordinateFromPixel([t[0]-this.pixelTolerance_,t[1]+this.pixelTolerance_]),r=i.getCoordinateFromPixel([t[0]+this.pixelTolerance_,t[1]-this.pixelTolerance_]),s=Object(u["b"])([n,r]),a=this.rBush_.getInExtent(s);this.vertex_&&!this.edge_&&(a=a.filter((function(t){return t.feature.getGeometry().getType()!==o["a"].CIRCLE})));var h=!1,c=null,l=null;if(0===a.length)return{snapped:h,vertex:c,vertexPixel:l};for(var p,g=i.getView().getProjection(),_=Object(f["e"])(e,g),y=1/0,v=0;v<a.length;++v){var b=a[v];m[0]=Object(f["e"])(b.segment[0],g),m[1]=Object(f["e"])(b.segment[1],g);var O=Object(d["j"])(_,m);O<y&&(p=b,y=O)}var C=p.segment;if(this.vertex_&&!this.edge_){var P=i.getPixelFromCoordinate(C[0]),E=i.getPixelFromCoordinate(C[1]),w=Object(d["i"])(t,P),T=Object(d["i"])(t,E),j=Math.sqrt(Math.min(w,T));j<=this.pixelTolerance_&&(h=!0,c=w>T?C[1]:C[0],l=i.getPixelFromCoordinate(c))}else if(this.edge_){var x=p.feature.getGeometry().getType()===o["a"].CIRCLE;if(x){var F=p.feature.getGeometry(),I=Object(f["l"])();I&&(F=F.clone().transform(I,g)),c=Object(f["n"])(Object(d["b"])(_,F),g)}else m[0]=Object(f["e"])(C[0],g),m[1]=Object(f["e"])(C[1],g),c=Object(f["n"])(Object(d["c"])(_,m),g);if(l=i.getPixelFromCoordinate(c),Object(d["d"])(t,l)<=this.pixelTolerance_&&(h=!0,this.vertex_&&!x)){P=i.getPixelFromCoordinate(C[0]),E=i.getPixelFromCoordinate(C[1]),w=Object(d["i"])(l,P),T=Object(d["i"])(l,E),j=Math.sqrt(Math.min(w,T));j<=this.pixelTolerance_&&(c=w>T?C[1]:C[0],l=i.getPixelFromCoordinate(c))}}return h&&(l=[Math.round(l[0]),Math.round(l[1])]),{snapped:h,vertex:c,vertexPixel:l}},e.prototype.updateFeature_=function(t){this.removeFeature(t,!1),this.addFeature(t,!1)},e.prototype.writeCircleGeometry_=function(t,e){var i=this.getMap().getView().getProjection(),n=e,r=Object(f["l"])();r&&(n=n.clone().transform(r,i));var o=Object(l["b"])(n);r&&o.transform(i,r);for(var s=o.getCoordinates()[0],a=0,h=s.length-1;a<h;++a){var c=s.slice(a,a+2),d={feature:t,segment:c};this.rBush_.insert(Object(u["b"])(c),d)}},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),n=0;n<i.length;++n){var r=this.SEGMENT_WRITERS_[i[n].getType()];r&&r(t,i[n])}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length-1;n<r;++n){var o=i.slice(n,n+2),s={feature:t,segment:o};this.rBush_.insert(Object(u["b"])(o),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),c={feature:t,segment:h};this.rBush_.insert(Object(u["b"])(h),c)}},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n){var o=i[n],s={feature:t,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],s=0,a=o.length;s<a;++s)for(var h=o[s],c=0,d=h.length-1;c<d;++c){var l=h.slice(c,c+2),f={feature:t,segment:l};this.rBush_.insert(Object(u["b"])(l),f)}},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),n={feature:t,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),c={feature:t,segment:h};this.rBush_.insert(Object(u["b"])(h),c)}},e}(s["b"]);e["a"]=b},b64b:function(t,e,i){var n=i("23e7"),r=i("7b0b"),o=i("df75"),s=i("d039"),a=s((function(){o(1)}));n({target:"Object",stat:!0,forced:a},{keys:function(t){return o(r(t))}})},b867:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"map-box"},[i("div",{ref:"map",staticClass:"map-container",attrs:{id:"map"}}),t._l(t.featureIds,(function(e,n){return i("div",{key:n,staticClass:"delete",attrs:{id:n}},[i("span",{staticClass:"delete-btn"},[i("a-icon",{attrs:{type:"delete"},on:{click:function(e){return t.handleDelete(n)}}})],1),i("span",{staticClass:"text"},[t._v(" 面积: "+t._s(e.area)+" m"),i("sup",[t._v("2")])])])}))],2)},r=[],o=i("ade3"),s=i("5530"),a=(i("d81d"),i("69af")),h=(i("5bc0"),i("5eee")),c=i("d0e9"),u=i("480c"),d=i("a2c7"),l=i("3e6b"),f=i("5831"),p=i("6c77"),g=i("8682"),_=i("83a6"),y=i("ce2c"),v=i("b2fc"),m=i("c807"),b=i("ac29"),O=i("0710"),C=i("9a44"),P={name:"MeasureArea",mixins:[a["a"]],data:function(){return{map:null,vectorLayer:null,vectorSource:null,drawPolygon:null,snap:null,modify:null,featureIds:{}}},mounted:function(){this.initMap()},beforeDestroy:function(){this.drawPolygon&&this.drawPolygon.un("drawend",this.drawPolygonEnd),this.modify&&this.modify.un("modifyend",this.modifyEnd)},methods:{initMap:function(){var t=this.getVectorLayer(),e=t.vectorLayer,i=t.vectorSource;this.vectorLayer=e,this.vectorSource=i,this.map=new h["a"]({target:"map",layers:[new u["a"]({source:new c["a"]}),e],view:new d["a"]({center:[13384755.517469,3529894.878215],zoom:15}),controls:[]}),this.addInteractions(i)},getVectorLayer:function(){var t=new f["a"],e=[new p["c"]({stroke:new g["a"]({color:"blue",width:2}),fill:new _["a"]({color:"rgba(0, 0, 255, 0.1)"})}),new p["c"]({image:new y["a"]({radius:5,fill:new _["a"]({color:"#fff"}),stroke:new g["a"]({color:"orange",width:2})}),geometry:function(t){var e=t.getGeometry().getCoordinates()[0];return new C["a"](e)}})],i=new l["a"]({source:t,style:e});return{vectorLayer:i,vectorSource:t}},addInteractions:function(t){this.snap=new v["a"]({source:t}),this.modify=new m["a"]({source:t}),this.drawPolygon=new b["a"]({source:t,type:"Polygon",id:"draw-Polygon"}),this.map.addInteraction(this.modify),this.map.addInteraction(this.snap),this.map.addInteraction(this.drawPolygon),this.drawPolygon.on("drawend",this.drawPolygonEnd),this.modify.on("modifyend",this.modifyEnd)},drawPolygonEnd:function(t){var e=this,i="polygon_".concat(t.feature.ol_uid);t.feature.setId(i),this.featureIds=Object(s["a"])(Object(s["a"])({},this.featureIds),Object(o["a"])({},i,{area:Math.round(100*t.feature.getGeometry().getArea())/100}));var n=t.feature.getGeometry().getInteriorPoint().flatCoordinates,r=[n[0],n[1]];this.$nextTick((function(){e.getOverayDelete(i,r)}))},modifyEnd:function(t){var e=t.features.getArray()[0],i=e.getId(),n=e.getGeometry().getInteriorPoint().flatCoordinates,r=[n[0],n[1]];this.featureIds[i]={area:Math.round(100*e.getGeometry().getArea())/100},this.map.getOverlayById(i).setPosition(r)},getOverayDelete:function(t,e){var i=new O["a"]({id:t,element:document.getElementById(t),position:e,positioning:"right-center",stopEvent:!0});this.map.addOverlay(i)},handleDelete:function(t){var e=this.vectorSource.getFeatureById(t);this.vectorSource.removeFeature(e);var i=this.map.getOverlayById(t);this.map.removeOverlay(i);var n=Object(s["a"])({},this.featureIds);delete n[t],this.featureIds=n}}},E=P,w=(i("4c2a"),i("2877")),T=Object(w["a"])(E,n,r,!1,null,"0ae68fa0",null);e["default"]=T.exports},c807:function(t,e,i){"use strict";var n=i("e300"),r=i("183a"),o=i("cef7"),s=i("01d4"),a=i("4cdf"),h=i("f623"),c=i("0b2d"),u=i("f403"),d=i("4105"),l=i("4a7d"),f=i("a43f"),p=i("3e6b"),g=i("5831"),_=i("06f8"),y=i("0af5"),v=i("a568"),m=i("6c77"),b=i("9f5e"),O=i("5bc3"),C=i("256f"),P=i("1300"),E=function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!==typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),w=0,T=1,j=[0,0,0,0],x=[],F={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"},I=function(t){function e(e,i,n){var r=t.call(this,e)||this;return r.features=i,r.mapBrowserEvent=n,r}return E(e,t),e}(o["a"]),S=function(t){function e(e){var i,o=t.call(this,e)||this;if(o.on,o.once,o.un,o.boundHandleFeatureChange_=o.handleFeatureChange_.bind(o),o.condition_=e.condition?e.condition:_["k"],o.defaultDeleteCondition_=function(t){return Object(_["b"])(t)&&Object(_["m"])(t)},o.deleteCondition_=e.deleteCondition?e.deleteCondition:o.defaultDeleteCondition_,o.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:_["d"],o.vertexFeature_=null,o.vertexSegments_=null,o.lastPixel_=[0,0],o.ignoreNextSingleClick_=!1,o.featuresBeingModified_=null,o.rBush_=new l["a"],o.pixelTolerance_=void 0!==e.pixelTolerance?e.pixelTolerance:10,o.snappedToVertex_=!1,o.changingFeature_=!1,o.dragSegments_=[],o.overlay_=new p["a"]({source:new g["a"]({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:M(),updateWhileAnimating:!0,updateWhileInteracting:!0}),o.SEGMENT_WRITERS_={Point:o.writePointGeometry_.bind(o),LineString:o.writeLineStringGeometry_.bind(o),LinearRing:o.writeLineStringGeometry_.bind(o),Polygon:o.writePolygonGeometry_.bind(o),MultiPoint:o.writeMultiPointGeometry_.bind(o),MultiLineString:o.writeMultiLineStringGeometry_.bind(o),MultiPolygon:o.writeMultiPolygonGeometry_.bind(o),Circle:o.writeCircleGeometry_.bind(o),GeometryCollection:o.writeGeometryCollectionGeometry_.bind(o)},o.source_=null,o.hitDetection_=null,e.features?i=e.features:e.source&&(o.source_=e.source,i=new n["a"](o.source_.getFeatures()),o.source_.addEventListener(f["a"].ADDFEATURE,o.handleSourceAdd_.bind(o)),o.source_.addEventListener(f["a"].REMOVEFEATURE,o.handleSourceRemove_.bind(o))),!i)throw new Error("The modify interaction requires features, a source or a layer");return e.hitDetection&&(o.hitDetection_=e.hitDetection),o.features_=i,o.features_.forEach(o.addFeature_.bind(o)),o.features_.addEventListener(r["a"].ADD,o.handleFeatureAdd_.bind(o)),o.features_.addEventListener(r["a"].REMOVE,o.handleFeatureRemove_.bind(o)),o.lastPointerEvent_=null,o.delta_=[0,0],o.snapToPointer_=void 0===e.snapToPointer?!o.hitDetection_:e.snapToPointer,o}return E(e,t),e.prototype.addFeature_=function(t){var e=t.getGeometry();if(e){var i=this.SEGMENT_WRITERS_[e.getType()];i&&i(t,e)}var n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),t.addEventListener(s["a"].CHANGE,this.boundHandleFeatureChange_)},e.prototype.willModifyFeatures_=function(t,e){if(!this.featuresBeingModified_){this.featuresBeingModified_=new n["a"];for(var i=this.featuresBeingModified_.getArray(),r=0,o=e.length;r<o;++r)for(var s=e[r],a=0,h=s.length;a<h;++a){var c=s[a].feature;c&&-1===i.indexOf(c)&&this.featuresBeingModified_.push(c)}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new I(F.MODIFYSTART,this.featuresBeingModified_,t))}},e.prototype.removeFeature_=function(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(s["a"].CHANGE,this.boundHandleFeatureChange_)},e.prototype.removeFeatureSegmentData_=function(t){var e=this.rBush_,i=[];e.forEach((function(e){t===e.feature&&i.push(e)}));for(var n=i.length-1;n>=0;--n){for(var r=i[n],o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===r&&this.dragSegments_.splice(o,1);e.remove(r)}},e.prototype.setActive=function(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.prototype.setActive.call(this,e)},e.prototype.setMap=function(e){this.overlay_.setMap(e),t.prototype.setMap.call(this,e)},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleSourceAdd_=function(t){t.feature&&this.features_.push(t.feature)},e.prototype.handleSourceRemove_=function(t){t.feature&&this.features_.remove(t.feature)},e.prototype.handleFeatureAdd_=function(t){this.addFeature_(t.element)},e.prototype.handleFeatureChange_=function(t){if(!this.changingFeature_){var e=t.target;this.removeFeature_(e),this.addFeature_(e)}},e.prototype.handleFeatureRemove_=function(t){var e=t.element;this.removeFeature_(e)},e.prototype.writePointGeometry_=function(t,e){var i=e.getCoordinates(),n={feature:t,geometry:e,segment:[i,i]};this.rBush_.insert(e.getExtent(),n)},e.prototype.writeMultiPointGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n){var o=i[n],s={feature:t,geometry:e,depth:[n],index:n,segment:[o,o]};this.rBush_.insert(e.getExtent(),s)}},e.prototype.writeLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length-1;n<r;++n){var o=i.slice(n,n+2),s={feature:t,geometry:e,index:n,segment:o};this.rBush_.insert(Object(y["b"])(o),s)}},e.prototype.writeMultiLineStringGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),c={feature:t,geometry:e,depth:[n],index:s,segment:h};this.rBush_.insert(Object(y["b"])(h),c)}},e.prototype.writePolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],s=0,a=o.length-1;s<a;++s){var h=o.slice(s,s+2),c={feature:t,geometry:e,depth:[n],index:s,segment:h};this.rBush_.insert(Object(y["b"])(h),c)}},e.prototype.writeMultiPolygonGeometry_=function(t,e){for(var i=e.getCoordinates(),n=0,r=i.length;n<r;++n)for(var o=i[n],s=0,a=o.length;s<a;++s)for(var h=o[s],c=0,u=h.length-1;c<u;++c){var d=h.slice(c,c+2),l={feature:t,geometry:e,depth:[s,n],index:c,segment:d};this.rBush_.insert(Object(y["b"])(d),l)}},e.prototype.writeCircleGeometry_=function(t,e){var i=e.getCenter(),n={feature:t,geometry:e,index:w,segment:[i,i]},r={feature:t,geometry:e,index:T,segment:[i,i]},o=[n,r];n.featureSegments=o,r.featureSegments=o,this.rBush_.insert(Object(y["m"])(i),n);var s=e,a=Object(C["l"])();if(a&&this.getMap()){var h=this.getMap().getView().getProjection();s=s.clone().transform(a,h),s=Object(O["b"])(s).transform(h,a)}this.rBush_.insert(s.getExtent(),r)},e.prototype.writeGeometryCollectionGeometry_=function(t,e){for(var i=e.getGeometriesArray(),n=0;n<i.length;++n){var r=i[n],o=this.SEGMENT_WRITERS_[r.getType()];o(t,r)}},e.prototype.createOrUpdateVertexFeature_=function(t,e,i){var n=this.vertexFeature_;if(n){var r=n.getGeometry();r.setCoordinates(t)}else n=new a["a"](new u["a"](t)),this.vertexFeature_=n,this.overlay_.getSource().addFeature(n);return n.set("features",e),n.set("geometries",i),n},e.prototype.handleEvent=function(e){return!e.originalEvent||(this.lastPointerEvent_=e,e.map.getView().getInteracting()||e.type!=c["a"].POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(i=!(e.type!=c["a"].SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),e.type==c["a"].SINGLECLICK&&(this.ignoreNextSingleClick_=!1),t.prototype.handleEvent.call(this,e)&&!i);var i},e.prototype.handleDragEvent=function(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_);for(var e=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],i=[],n=[],r=0,o=this.dragSegments_.length;r<o;++r){var s=this.dragSegments_[r],a=s[0],c=a.feature;-1===i.indexOf(c)&&i.push(c);var u=a.geometry;-1===n.indexOf(u)&&n.push(u);var d=a.depth,l=void 0,f=a.segment,p=s[1];while(e.length<u.getStride())e.push(f[p][e.length]);switch(u.getType()){case h["a"].POINT:l=e,f[0]=e,f[1]=e;break;case h["a"].MULTI_POINT:l=u.getCoordinates(),l[a.index]=e,f[0]=e,f[1]=e;break;case h["a"].LINE_STRING:l=u.getCoordinates(),l[a.index+p]=e,f[p]=e;break;case h["a"].MULTI_LINE_STRING:l=u.getCoordinates(),l[d[0]][a.index+p]=e,f[p]=e;break;case h["a"].POLYGON:l=u.getCoordinates(),l[d[0]][a.index+p]=e,f[p]=e;break;case h["a"].MULTI_POLYGON:l=u.getCoordinates(),l[d[1]][d[0]][a.index+p]=e,f[p]=e;break;case h["a"].CIRCLE:if(f[0]=e,f[1]=e,a.index===w)this.changingFeature_=!0,u.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;var g=t.map.getView().getProjection(),_=Object(v["d"])(Object(C["e"])(u.getCenter(),g),Object(C["e"])(e,g)),y=Object(C["l"])();if(y){var m=u.clone().transform(y,g);m.setRadius(_),_=m.transform(g,y).getRadius()}u.setRadius(_),this.changingFeature_=!1}break;default:}l&&this.setGeometryCoordinates_(u,l)}this.createOrUpdateVertexFeature_(e,i,n)},e.prototype.handleDownEvent=function(t){if(!this.condition_(t))return!1;var e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.featuresBeingModified_=null;var i=this.vertexFeature_;if(i){var n=t.map.getView().getProjection(),r=[],o=i.getGeometry().getCoordinates(),s=Object(y["b"])([o]),a=this.rBush_.getInExtent(s),c={};a.sort(L);for(var u=0,d=a.length;u<d;++u){var l=a[u],f=l.segment,p=Object(P["c"])(l.geometry),g=l.depth;if(g&&(p+="-"+g.join("-")),c[p]||(c[p]=new Array(2)),l.geometry.getType()!==h["a"].CIRCLE||l.index!==T)if(!Object(v["e"])(f[0],o)||c[p][0])if(!Object(v["e"])(f[1],o)||c[p][1])Object(P["c"])(f)in this.vertexSegments_&&!c[p][0]&&!c[p][1]&&this.insertVertexCondition_(t)&&r.push(l);else{if((l.geometry.getType()===h["a"].LINE_STRING||l.geometry.getType()===h["a"].MULTI_LINE_STRING)&&c[p][0]&&0===c[p][0].index)continue;this.dragSegments_.push([l,1]),c[p][1]=l}else this.dragSegments_.push([l,0]),c[p][0]=l;else{var _=N(e,l,n);Object(v["e"])(_,o)&&!c[p][0]&&(this.dragSegments_.push([l,0]),c[p][0]=l)}}r.length&&this.willModifyFeatures_(t,[r]);for(var m=r.length-1;m>=0;--m)this.insertVertex_(r[m],o)}return!!this.vertexFeature_},e.prototype.handleUpEvent=function(t){for(var e=this.dragSegments_.length-1;e>=0;--e){var i=this.dragSegments_[e][0],n=i.geometry;if(n.getType()===h["a"].CIRCLE){var r=n.getCenter(),o=i.featureSegments[0],s=i.featureSegments[1];o.segment[0]=r,o.segment[1]=r,s.segment[0]=r,s.segment[1]=r,this.rBush_.update(Object(y["m"])(r),o);var a=n,c=Object(C["l"])();if(c){var u=t.map.getView().getProjection();a=a.clone().transform(c,u),a=Object(O["b"])(a).transform(u,c)}this.rBush_.update(a.getExtent(),s)}else this.rBush_.update(Object(y["b"])(i.segment),i)}return this.featuresBeingModified_&&(this.dispatchEvent(new I(F.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1},e.prototype.handlePointerMove_=function(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)},e.prototype.handlePointerAtPixel_=function(t,e,i){var n,r,o=this,s=i||e.getCoordinateFromPixel(t),a=e.getView().getProjection(),c=function(t,e){return R(s,t,a)-R(s,e,a)};if(this.hitDetection_){var u="object"===typeof this.hitDetection_?function(t){return t===o.hitDetection_}:void 0;e.forEachFeatureAtPixel(t,(function(t,e,i){if(i=i||t.getGeometry(),i.getType()===h["a"].POINT&&Object(b["d"])(o.features_.getArray(),t)){r=i;var s=i.getFlatCoordinates().slice(0,2);n=[{feature:t,geometry:i,segment:[s,s]}]}return!0}),{layerFilter:u})}if(!n){var d=Object(C["f"])(Object(y["m"])(s,j),a),l=e.getView().getResolution()*this.pixelTolerance_,f=Object(C["o"])(Object(y["c"])(d,l,j),a);n=this.rBush_.getInExtent(f)}if(n&&n.length>0){var p=n.sort(c)[0],g=p.segment,_=N(s,p,a),m=e.getPixelFromCoordinate(_),O=Object(v["d"])(t,m);if(r||O<=this.pixelTolerance_){var E={};if(E[Object(P["c"])(g)]=!0,this.snapToPointer_||(this.delta_[0]=_[0]-s[0],this.delta_[1]=_[1]-s[1]),p.geometry.getType()===h["a"].CIRCLE&&p.index===T)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(_,[p.feature],[p.geometry]);else{var w=e.getPixelFromCoordinate(g[0]),x=e.getPixelFromCoordinate(g[1]),F=Object(v["i"])(m,w),I=Object(v["i"])(m,x);O=Math.sqrt(Math.min(F,I)),this.snappedToVertex_=O<=this.pixelTolerance_,this.snappedToVertex_&&(_=F>I?g[1]:g[0]),this.createOrUpdateVertexFeature_(_,[p.feature],[p.geometry]);var S={};S[Object(P["c"])(p.geometry)]=!0;for(var L=1,M=n.length;L<M;++L){var G=n[L].segment;if(!(Object(v["e"])(g[0],G[0])&&Object(v["e"])(g[1],G[1])||Object(v["e"])(g[0],G[1])&&Object(v["e"])(g[1],G[0])))break;var k=Object(P["c"])(n[L].geometry);k in S||(S[k]=!0,E[Object(P["c"])(G)]=!0)}}return void(this.vertexSegments_=E)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)},e.prototype.insertVertex_=function(t,e){var i,n=t.segment,r=t.feature,o=t.geometry,s=t.depth,a=t.index;while(e.length<o.getStride())e.push(0);switch(o.getType()){case h["a"].MULTI_LINE_STRING:i=o.getCoordinates(),i[s[0]].splice(a+1,0,e);break;case h["a"].POLYGON:i=o.getCoordinates(),i[s[0]].splice(a+1,0,e);break;case h["a"].MULTI_POLYGON:i=o.getCoordinates(),i[s[1]][s[0]].splice(a+1,0,e);break;case h["a"].LINE_STRING:i=o.getCoordinates(),i.splice(a+1,0,e);break;default:return}this.setGeometryCoordinates_(o,i);var c=this.rBush_;c.remove(t),this.updateSegmentIndices_(o,a,s,1);var u={segment:[n[0],e],feature:r,geometry:o,depth:s,index:a};c.insert(Object(y["b"])(u.segment),u),this.dragSegments_.push([u,1]);var d={segment:[e,n[1]],feature:r,geometry:o,depth:s,index:a+1};c.insert(Object(y["b"])(d.segment),d),this.dragSegments_.push([d,0]),this.ignoreNextSingleClick_=!0},e.prototype.removePoint=function(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=c["a"].POINTERDRAG){var t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_);var e=this.removeVertex_();return this.dispatchEvent(new I(F.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,e}return!1},e.prototype.removeVertex_=function(){var t,e,i,n,r,o,s,a,c,u,d,l=this.dragSegments_,f={},p=!1;for(r=l.length-1;r>=0;--r)i=l[r],u=i[0],d=Object(P["c"])(u.feature),u.depth&&(d+="-"+u.depth.join("-")),d in f||(f[d]={}),0===i[1]?(f[d].right=u,f[d].index=u.index):1==i[1]&&(f[d].left=u,f[d].index=u.index+1);for(d in f){switch(c=f[d].right,s=f[d].left,o=f[d].index,a=o-1,u=void 0!==s?s:c,a<0&&(a=0),n=u.geometry,e=n.getCoordinates(),t=e,p=!1,n.getType()){case h["a"].MULTI_LINE_STRING:e[u.depth[0]].length>2&&(e[u.depth[0]].splice(o,1),p=!0);break;case h["a"].LINE_STRING:e.length>2&&(e.splice(o,1),p=!0);break;case h["a"].MULTI_POLYGON:t=t[u.depth[1]];case h["a"].POLYGON:t=t[u.depth[0]],t.length>4&&(o==t.length-1&&(o=0),t.splice(o,1),p=!0,0===o&&(t.pop(),t.push(t[0]),a=t.length-1));break;default:}if(p){this.setGeometryCoordinates_(n,e);var g=[];if(void 0!==s&&(this.rBush_.remove(s),g.push(s.segment[0])),void 0!==c&&(this.rBush_.remove(c),g.push(c.segment[1])),void 0!==s&&void 0!==c){var _={depth:u.depth,feature:u.feature,geometry:u.geometry,index:a,segment:g};this.rBush_.insert(Object(y["b"])(_.segment),_)}this.updateSegmentIndices_(n,o,u.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),l.length=0}}return p},e.prototype.setGeometryCoordinates_=function(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1},e.prototype.updateSegmentIndices_=function(t,e,i,n){this.rBush_.forEachInExtent(t.getExtent(),(function(r){r.geometry===t&&(void 0===i||void 0===r.depth||Object(b["b"])(r.depth,i))&&r.index>e&&(r.index+=n)}))},e}(d["b"]);function L(t,e){return t.index-e.index}function R(t,e,i){var n=e.geometry;if(n.getType()===h["a"].CIRCLE){var r=n;if(e.index===T){var o=Object(C["l"])();o&&(r=r.clone().transform(o,i));var s=Object(v["i"])(r.getCenter(),Object(C["e"])(t,i)),a=Math.sqrt(s)-r.getRadius();return a*a}}var c=Object(C["e"])(t,i);return x[0]=Object(C["e"])(e.segment[0],i),x[1]=Object(C["e"])(e.segment[1],i),Object(v["j"])(c,x)}function N(t,e,i){var n=e.geometry;if(n.getType()===h["a"].CIRCLE&&e.index===T){var r=n,o=Object(C["l"])();return o&&(r=r.clone().transform(o,i)),Object(C["n"])(r.getClosestPoint(Object(C["e"])(t,i)),i)}var s=Object(C["e"])(t,i);return x[0]=Object(C["e"])(e.segment[0],i),x[1]=Object(C["e"])(e.segment[1],i),Object(C["n"])(Object(v["c"])(s,x),i)}function M(){var t=Object(m["b"])();return function(e,i){return t[h["a"].POINT]}}e["a"]=S},dbb4:function(t,e,i){var n=i("23e7"),r=i("83ab"),o=i("56ef"),s=i("fc6a"),a=i("06cf"),h=i("8418");n({target:"Object",stat:!0,sham:!r},{getOwnPropertyDescriptors:function(t){var e,i,n=s(t),r=a.f,c=o(n),u={},d=0;while(c.length>d)i=r(n,e=c[d++]),void 0!==i&&h(u,e,i);return u}})},e439:function(t,e,i){var n=i("23e7"),r=i("d039"),o=i("fc6a"),s=i("06cf").f,a=i("83ab"),h=r((function(){s(1)})),c=!a||h;n({target:"Object",stat:!0,forced:c,sham:!a},{getOwnPropertyDescriptor:function(t,e){return s(o(t),e)}})},e5383:function(t,e,i){var n=i("b622");e.f=n}}]);